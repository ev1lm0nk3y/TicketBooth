%h1 Ticket Requests

%table.table
  %thead
    %tr
      %th Name
      %th Adults
      %th Kids
      %th Cabins
      %th Price
      %th
      %th
      %th Status
      %th
  %tbody
    - @ticket_requests.each do |ticket_request|
      %tr{ class: class_for_table_row(ticket_request) }
        %td= link_to ticket_request.user.name, ticket_request
        %td= ticket_request.adults
        %td= ticket_request.kids
        %td= ticket_request.cabins
        %td
          %span.label{ class: ('label-info' if ticket_request.special_price) }
            = number_to_currency(ticket_request.price, precision: 0)
        %td
          - if ticket_request.assistance
            %span.text-error Financial Aid Needed
        %td
          - if ticket_request.notes.present?
            = link_to 'Additional Notes', ticket_request
        %td
          %span{ class: text_class_for_status(ticket_request) }
            = text_for_status ticket_request
        %td
          - if ticket_request.pending?
            = link_to approve_ticket_request_path(ticket_request),
              method: :post,
              class: 'btn btn-primary' do
              Approve
              %i.icon-ok
            = link_to decline_ticket_request_path(ticket_request),
              method: :post,
              class: 'btn btn-danger',
              confirm: "Are you sure you want to decline #{ticket_request.user.name}'s request?" do
              Decline
              %i.icon-remove

= link_to new_ticket_request_path, class: 'btn' do
  New Ticket Request
  %i.icon-plus-sign
